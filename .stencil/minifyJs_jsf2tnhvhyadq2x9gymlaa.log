import{h}from"../app.core.js";var CharacterAttribute=function(){function t(){this.showBonus=!0,this.styleType="vertical",this.isEditable=!1,this.bonus=0}return t.prototype.attrValueChanged=function(t){this.setValue(parseInt(t))},t.prototype.setValueFromEvent=function(t){t.detail&&this.setValue(t.detail)},t.prototype.clearBonus=function(){this.setBonus(0)},t.prototype.attributeDamageOrBonus=function(t){this.setBonus("attributeBonus"===t.type?this.bonus+t.detail:this.bonus-t.detail)},t.prototype.setBonus=function(t){this.bonus=t,this.bonus>0?this.el.classList.add("is-boosted"):this.el.classList.remove("is-boosted"),this.bonus<0?this.el.classList.add("is-penalized"):this.el.classList.remove("is-penalized"),this.setValue(this.currentAttrValue+this.bonus)},t.prototype.valueChanged=function(t){var e=t.detail;if(this.currentAttrValue!=e){if(this.attributeCap&&e>this.attributeCap)return this.setValue(e=this.attributeCap);this.currentAttrValue=e,this.bonus=this.calculateBonus()}},t.prototype.componentWillLoad=function(){this.styleClass="character-attribute-"+this.styleType,this.currentAttrValue=this.attributeValue,this.bonus=this.calculateBonus()},t.prototype.calculateBonus=function(){return this.bonusCalculation?this.bonusCalculation(this.currentAttrValue):Math.floor(this.currentAttrValue/2)-5},t.prototype.setValue=function(t){this.currentAttrValue=t,this.bonus=this.calculateBonus();var e=new CustomEvent("rpg_setvalue",{detail:this.currentAttrValue});this.el.querySelector("editable-number").dispatchEvent(e)},t.prototype.clickToEdit=function(t){var e=this;"INPUT"!=t.target.tagName&&(this.isEditable=!this.isEditable,this.isEditable&&setTimeout(function(){e.el.querySelector("input").focus()},0))},t.prototype.render=function(){return h("div",{class:"character-attribute-container "+this.styleClass},h("div",{class:"attribute-name"},this.name),h("editable-number",{startingValue:this.currentAttrValue}),this.showBonus?h("div",{class:"attribute-bonus-container"},this.bonus):"")},Object.defineProperty(t,"is",{get:function(){return"character-attribute"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{attributeCap:{type:Number,attr:"attribute-cap"},attributeValue:{type:Number,attr:"attribute-value",watchCallbacks:["attrValueChanged"]},bonus:{state:!0},bonusCalculation:{type:"Any",attr:"bonus-calculation"},currentAttrValue:{state:!0},el:{elementRef:!0},isEditable:{state:!0},name:{type:String,attr:"name"},showBonus:{type:Boolean,attr:"show-bonus"},styleType:{type:String,attr:"style-type"}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"listeners",{get:function(){return[{name:"rpg_setvalue",method:"setValueFromEvent"},{name:"clearBonus",method:"clearBonus"},{name:"attributeDamage",method:"attributeDamageOrBonus"},{name:"attributeBonus",method:"attributeDamageOrBonus"},{name:"valueChanged",method:"valueChanged"}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"/**style-placeholder:character-attribute:**/"},enumerable:!0,configurable:!0}),t}(),CharacterSkill=function(){function t(){this.proficiencyBonus=2,this.ranks=0,this.bonus=0,this.attributeBonus=0,this.currentBonus=0}return t.prototype.componentWillLoad=function(){this.isProficient=this.proficient},t.prototype.componentDidLoad=function(){this.renderProficiency(),this.recalculateCurrentBonus()},t.prototype.setRanks=function(t){this.ranks=t.detail,this.recalculateCurrentBonus()},t.prototype.setAttributeBonus=function(t){this.attributeBonus=t.detail,this.recalculateCurrentBonus()},t.prototype.setBonus=function(t){this.bonus=t.detail,this.recalculateCurrentBonus()},t.prototype.toggleProficient=function(){this.isProficient=!this.isProficient,console.log(this.isProficient),this.renderProficiency(),this.recalculateCurrentBonus()},t.prototype.recalculateCurrentBonus=function(){var t=this.bonus+this.attributeBonus+this.ranks;this.proficient&&(t+=this.proficiencyBonus),this.currentBonus=t},t.prototype.renderProficiency=function(){var t=this.el.querySelector("#isProficient");t&&(this.isProficient?t.classList.add("proficient"):t.classList.remove("proficient"))},t.prototype.render=function(){var t=this;return h("div",null,h("div",{class:"is-proficient"},h("span",{id:"isProficient",onClick:function(){return t.toggleProficient()}})),h("div",{class:"current-bonus"},this.currentBonus),h("div",{class:"name"},this.name))},Object.defineProperty(t,"is",{get:function(){return"character-skill"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{attributeBonus:{type:Number,attr:"attribute-bonus"},bonus:{type:Number,attr:"bonus"},currentBonus:{state:!0},el:{elementRef:!0},isProficient:{state:!0},name:{type:String,attr:"name"},proficiencyBonus:{type:Number,attr:"proficiency-bonus"},proficient:{type:Boolean,attr:"proficient"},ranks:{type:Number,attr:"ranks"}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"listeners",{get:function(){return[{name:"setRanks",method:"setRanks"},{name:"setAttributeBonus",method:"setAttributeBonus"},{name:"setBonus",method:"setBonus"}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"/**style-placeholder:character-skill:**/"},enumerable:!0,configurable:!0}),t}(),DeathSavingThrow=function(){function t(){this.maxSuccesses=3,this.maxFailures=3,this.numSuccesses=0,this.numFailures=0}return t.prototype.clearCounts=function(){this.numSuccesses=0,this.numFailures=0},t.prototype.counterMap=function(t,e){return new Array(t).fill(!1).map(function(t,n){return n<e})},t.prototype.decrement=function(t){"success"===t?this.numSuccesses-=1:this.numFailures-=1,this.checkForImpossibleNumbers()},t.prototype.increment=function(t){"success"===t?this.numSuccesses+=1:this.numFailures+=1,this.checkForImpossibleNumbers()},t.prototype.checkForImpossibleNumbers=function(){this.numSuccesses<0&&(this.numSuccesses=0),this.numFailures<0&&(this.numFailures=0),this.numSuccesses>this.maxSuccesses&&(this.numSuccesses=this.maxSuccesses),this.numFailures>this.maxFailures&&(this.numFailures=this.maxFailures)},t.prototype.render=function(){var t=this;return h("div",{class:"death-saving-throw-container"},h("div",{class:"counter-container success-counter"},h("div",{class:"counter-name"},"Successes"),h("div",{class:"counter-trackers"},h("div",{class:"minus-button"},h("button",{onClick:function(){return t.decrement("success")}},"-")),this.counterMap(this.maxSuccesses,this.numSuccesses).map(function(t){return h("span",t?{class:"filled"}:{class:"unfilled"})}),h("div",{class:"plus-button"},h("button",{onClick:function(e){return t.increment("success")}},"+")))),h("div",{class:"counter-container failure-counter"},h("div",{class:"counter-name"},"Failures"),h("div",{class:"counter-trackers"},h("div",{class:"minus-button"},h("button",{onClick:function(){return t.decrement("failure")}},"-")),this.counterMap(this.maxFailures,this.numFailures).map(function(t){return h("span",t?{class:"filled"}:{class:"unfilled"})}),h("div",{class:"plus-button"},h("button",{onClick:function(e){return t.increment("failure")}},"+")))),h("h2",null,"Death Saves"))},Object.defineProperty(t,"is",{get:function(){return"death-saving-throw"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{clearCounts:{method:!0},maxFailures:{type:Number,attr:"max-failures"},maxSuccesses:{type:Number,attr:"max-successes"},numFailures:{state:!0},numSuccesses:{state:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"/**style-placeholder:death-saving-throw:**/"},enumerable:!0,configurable:!0}),t}(),MyApp=function(){function t(){}return t.prototype.resetCounter=function(t){document.getElementById(t).dispatchEvent(new CustomEvent("rpg_resetvalue"))},t.prototype.counterSetDemo=function(){var t=document.querySelector("#hpTracker");console.log(t),t.maximum="100"},t.prototype.addBonusToStrength=function(){document.querySelector("#strength").dispatchEvent(new CustomEvent("attributeBonus",{detail:2}))},t.prototype.gimmeGold=function(){document.querySelector("#wallet").setCurrencyValue("GP",200)},t.prototype.render=function(){var t=this;return h("div",null,h("header",null,h("h1",null,"RPG Components Example")),h("main",null,h("div",{class:"intro"},h("div",{class:"intro-container"},h("rpg-text-input",{label:"Name","starting-text":"cthos",placeholder:"name","style-type":"underneath"})),h("div",{class:"intro-container"},h("rpg-text-input",{label:"Class & Level","style-type":"underneath"}),h("rpg-text-input",{label:"Background","style-type":"underneath"}),h("rpg-text-input",{label:"Player Name","style-type":"underneath"}),h("rpg-text-input",{label:"Race","style-type":"underneath"}),h("rpg-text-input",{label:"Alignment","style-type":"underneath"}),h("rpg-text-input",{label:"Experience Points","style-type":"underneath"}))),h("div",{class:"attributes"},h("character-attribute",{id:"strength",name:"Strength","attribute-value":10}),h("character-attribute",{name:"Dexterity","attribute-value":18}),h("character-attribute",{name:"Constitution","attribute-value":8}),h("character-attribute",{name:"Intelligence","attribute-value":12}),h("character-attribute",{name:"Wisdom","attribute-value":10}),h("character-attribute",{name:"Charisma","attribute-value":16})),h("div",{class:"point-example"},h("div",{class:"pointtrack"},h("point-tracker",{id:"manaTracker",title:"MP",maximum:30}),h("point-tracker",{id:"ac",title:"AC",maximum:14,"show-incrementors":!1})),h("div",{class:"hit-point-box"},h("rpg-text-input",{label:"Hit Point Maximum","style-type":"inline"}),h("point-tracker",{id:"hpTracker",maximum:10})),h("div",{class:"skill-list"},h("character-skill",{name:"Acrobatics",proficient:!0}),h("character-skill",{name:"Animal Handling",proficient:!0}),h("character-skill",{name:"Arcana",proficient:!0}),h("character-skill",{name:"Athletics",proficient:!0}),h("character-skill",{name:"Deception",proficient:!0}),h("character-skill",{name:"Knowledge (History)",proficient:!0})),h("div",{class:"wallet"},h("rpg-wallet",{id:"wallet",currencies:["GP","SP","CP"],currencyValues:[100,57,99]})),h("div",{class:"death-saving-throw"},h("death-saving-throw",null))),h("div",{class:"equipment-container"},h("rpg-equipment-box",null)),h("div",{class:"utility-container"},h("button",{type:"button",onClick:function(){return t.resetCounter("hpTracker")}},"Reset HP Count"),h("button",{type:"button",onClick:function(){return t.resetCounter("manaTracker")}},"Reset MP Count"),h("button",{type:"button",onClick:function(){return t.counterSetDemo()}},"Set HP to 100"),h("button",{type:"button",onClick:function(){return t.addBonusToStrength()}},"+2 to STR"),h("button",{type:"button",onClick:function(){return t.gimmeGold()}},"Gain Gold"))))},Object.defineProperty(t,"is",{get:function(){return"my-app"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"/**style-placeholder:my-app:**/"},enumerable:!0,configurable:!0}),t}(),PointTracker=function(){function t(){this.minimum=0,this.showIncrementors=!0,this.isEditable=!1}return t.prototype.resetCounter=function(){this.currentValue=this.maximum,this.setValue(this.currentValue)},t.prototype.setValueFromEvent=function(t){t.detail&&this.setValue(t.detail)},t.prototype.closeEditor=function(){this.isEditable&&(this.isEditable=!1)},t.prototype.valueChanged=function(t){this.currentValue!=t.detail&&(this.currentValue=t.detail)},t.prototype.setMaximum=function(t){this.maximum=parseInt(t),this.setValue(this.maximum)},t.prototype.componentWillLoad=function(){this.currentValue=this.maximum},t.prototype.setValue=function(t){var e=new CustomEvent("rpg_setvalue",{detail:t});this.el.querySelector("editable-number").dispatchEvent(e)},t.prototype.decrement=function(){this.currentValue-=1,this.currentValue<=this.minimum&&(this.currentValue=this.minimum),this.setValue(this.currentValue)},t.prototype.increment=function(){this.currentValue+=1,this.currentValue>=this.maximum&&(this.currentValue=this.maximum),this.setValue(this.currentValue)},t.prototype.render=function(){var t=this;return h("div",{class:"container"},h("h2",null,this.title),h("editable-number",{startingValue:this.currentValue}),this.showIncrementors?h("div",{class:"button-container"},h("button",{class:"button-left",onClick:function(){return t.decrement()}},"-"),h("button",{class:"button-right",onClick:function(){return t.increment()}},"+")):"")},Object.defineProperty(t,"is",{get:function(){return"point-tracker"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{currentValue:{state:!0},el:{elementRef:!0},isEditable:{state:!0},maximum:{type:Number,attr:"maximum",watchCallbacks:["setMaximum"]},minimum:{type:Number,attr:"minimum"},showIncrementors:{type:Boolean,attr:"show-incrementors"},title:{type:String,attr:"title"}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"listeners",{get:function(){return[{name:"rpg_resetvalue",method:"resetCounter"},{name:"rpg_setvalue",method:"setValueFromEvent"},{name:"keyup.escape",method:"closeEditor"},{name:"keyup.enter",method:"closeEditor"},{name:"valueChanged",method:"valueChanged"}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"/**style-placeholder:point-tracker:**/"},enumerable:!0,configurable:!0}),t}(),Wallet=function(){function t(){this.currencies=["GP","SP","PP","EP","CP"],this.currencyValues=[0,0,0,0,0]}return t.prototype.setCurrencyValue=function(t,e){var n;(n=Number.isInteger(t)?t:this.currencies.indexOf(t))<0||(this.currentCurrencyValues=this.currentCurrencyValues.map(function(t,r){return r===n?e:t}))},t.prototype.valueChanged=function(t){var e=t.target.getAttribute("data-index");this.setCurrencyValue(parseInt(e),t.detail),console.log(this.currentCurrencyValues)},t.prototype.componentWillLoad=function(){this.currentCurrencyValues=this.currencyValues},t.prototype.render=function(){var t=this;return h("div",{class:"wallet-container"},this.currencies.map(function(e,n){return h("div",{class:"currency"},h("span",{class:"currency-name"},e),h("span",{class:"currency-value"},h("editable-number",{"data-index":n,"starting-value":t.currentCurrencyValues[n]})))}))},Object.defineProperty(t,"is",{get:function(){return"rpg-wallet"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{currencies:{type:"Any",attr:"currencies"},currencyValues:{type:"Any",attr:"currency-values"},currentCurrencyValues:{state:!0},setCurrencyValue:{method:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"listeners",{get:function(){return[{name:"valueChanged",method:"valueChanged"}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"/**style-placeholder:rpg-wallet:**/"},enumerable:!0,configurable:!0}),t}();export{CharacterAttribute,CharacterSkill,DeathSavingThrow,MyApp,PointTracker,Wallet as RpgWallet};