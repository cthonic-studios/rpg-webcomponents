const t=window.App.h;class e{constructor(){this.showBonus=!0,this.styleType="vertical",this.isEditable=!1,this.bonus=0}attrValueChanged(t){this.setValue(parseInt(t))}setValueFromEvent(t){t.detail&&this.setValue(t.detail)}clearBonus(){this.setBonus(0)}attributeDamageOrBonus(t){let e;this.setBonus(e="attributeBonus"===t.type?this.bonus+t.detail:this.bonus-t.detail)}setBonus(t){this.bonus=t,this.bonus>0?this.el.classList.add("is-boosted"):this.el.classList.remove("is-boosted"),this.bonus<0?this.el.classList.add("is-penalized"):this.el.classList.remove("is-penalized"),this.setValue(this.currentAttrValue+this.bonus)}valueChanged(t){let e=t.detail;if(this.currentAttrValue!=e){if(this.attributeCap&&e>this.attributeCap)return this.setValue(e=this.attributeCap);this.currentAttrValue=e,this.bonus=this.calculateBonus()}}componentWillLoad(){this.styleClass=`character-attribute-${this.styleType}`,this.currentAttrValue=this.attributeValue,this.bonus=this.calculateBonus()}calculateBonus(){return this.bonusCalculation?this.bonusCalculation(this.currentAttrValue):Math.floor(this.currentAttrValue/2)-5}setValue(t){this.currentAttrValue=t,this.bonus=this.calculateBonus();let e=new CustomEvent("rpg_setvalue",{detail:this.currentAttrValue});this.el.querySelector("editable-number").dispatchEvent(e)}clickToEdit(t){"INPUT"!=t.target.tagName&&(this.isEditable=!this.isEditable,this.isEditable&&setTimeout(()=>{this.el.querySelector("input").focus()},0))}render(){return t("div",{class:"character-attribute-container "+this.styleClass},t("div",{class:"attribute-name"},this.name),t("editable-number",{startingValue:this.currentAttrValue}),this.showBonus?t("div",{class:"attribute-bonus-container"},this.bonus):"")}static get is(){return"character-attribute"}static get properties(){return{attributeCap:{type:Number,attr:"attribute-cap"},attributeValue:{type:Number,attr:"attribute-value",watchCallbacks:["attrValueChanged"]},bonus:{state:!0},bonusCalculation:{type:"Any",attr:"bonus-calculation"},currentAttrValue:{state:!0},el:{elementRef:!0},isEditable:{state:!0},name:{type:String,attr:"name"},showBonus:{type:Boolean,attr:"show-bonus"},styleType:{type:String,attr:"style-type"}}}static get listeners(){return[{name:"rpg_setvalue",method:"setValueFromEvent"},{name:"clearBonus",method:"clearBonus"},{name:"attributeDamage",method:"attributeDamageOrBonus"},{name:"attributeBonus",method:"attributeDamageOrBonus"},{name:"valueChanged",method:"valueChanged"}]}static get style(){return"/**style-placeholder:character-attribute:**/"}}class s{constructor(){this.proficiencyBonus=2,this.ranks=0,this.bonus=0,this.attributeBonus=0,this.currentBonus=0}componentWillLoad(){this.isProficient=this.proficient}componentDidLoad(){this.renderProficiency(),this.recalculateCurrentBonus()}setRanks(t){this.ranks=t.detail,this.recalculateCurrentBonus()}setAttributeBonus(t){this.attributeBonus=t.detail,this.recalculateCurrentBonus()}setBonus(t){this.bonus=t.detail,this.recalculateCurrentBonus()}toggleProficient(){this.isProficient=!this.isProficient,console.log(this.isProficient),this.renderProficiency(),this.recalculateCurrentBonus()}recalculateCurrentBonus(){let t=this.bonus+this.attributeBonus+this.ranks;this.proficient&&(t+=this.proficiencyBonus),this.currentBonus=t}renderProficiency(){let t=this.el.querySelector("#isProficient");t&&(this.isProficient?t.classList.add("proficient"):t.classList.remove("proficient"))}render(){return t("div",null,t("div",{class:"is-proficient"},t("span",{id:"isProficient",onClick:()=>this.toggleProficient()})),t("div",{class:"current-bonus"},this.currentBonus),t("div",{class:"name"},this.name))}static get is(){return"character-skill"}static get properties(){return{attributeBonus:{type:Number,attr:"attribute-bonus"},bonus:{type:Number,attr:"bonus"},currentBonus:{state:!0},el:{elementRef:!0},isProficient:{state:!0},name:{type:String,attr:"name"},proficiencyBonus:{type:Number,attr:"proficiency-bonus"},proficient:{type:Boolean,attr:"proficient"},ranks:{type:Number,attr:"ranks"}}}static get listeners(){return[{name:"setRanks",method:"setRanks"},{name:"setAttributeBonus",method:"setAttributeBonus"},{name:"setBonus",method:"setBonus"}]}static get style(){return"/**style-placeholder:character-skill:**/"}}class r{constructor(){this.maxSuccesses=3,this.maxFailures=3,this.numSuccesses=0,this.numFailures=0}clearCounts(){this.numSuccesses=0,this.numFailures=0}counterMap(t,e){return new Array(t).fill(!1).map((t,s)=>s<e)}decrement(t){"success"===t?this.numSuccesses-=1:this.numFailures-=1,this.checkForImpossibleNumbers()}increment(t){"success"===t?this.numSuccesses+=1:this.numFailures+=1,this.checkForImpossibleNumbers()}checkForImpossibleNumbers(){this.numSuccesses<0&&(this.numSuccesses=0),this.numFailures<0&&(this.numFailures=0),this.numSuccesses>this.maxSuccesses&&(this.numSuccesses=this.maxSuccesses),this.numFailures>this.maxFailures&&(this.numFailures=this.maxFailures)}render(){return t("div",{class:"death-saving-throw-container"},t("div",{class:"counter-container success-counter"},t("div",{class:"counter-name"},"Successes"),t("div",{class:"counter-trackers"},t("div",{class:"minus-button"},t("button",{onClick:()=>this.decrement("success")},"-")),this.counterMap(this.maxSuccesses,this.numSuccesses).map(e=>t("span",e?{class:"filled"}:{class:"unfilled"})),t("div",{class:"plus-button"},t("button",{onClick:t=>this.increment("success")},"+")))),t("div",{class:"counter-container failure-counter"},t("div",{class:"counter-name"},"Failures"),t("div",{class:"counter-trackers"},t("div",{class:"minus-button"},t("button",{onClick:()=>this.decrement("failure")},"-")),this.counterMap(this.maxFailures,this.numFailures).map(e=>t("span",e?{class:"filled"}:{class:"unfilled"})),t("div",{class:"plus-button"},t("button",{onClick:t=>this.increment("failure")},"+")))),t("h2",null,"Death Saves"))}static get is(){return"death-saving-throw"}static get properties(){return{clearCounts:{method:!0},maxFailures:{type:Number,attr:"max-failures"},maxSuccesses:{type:Number,attr:"max-successes"},numFailures:{state:!0},numSuccesses:{state:!0}}}static get style(){return"/**style-placeholder:death-saving-throw:**/"}}class i{resetCounter(t){document.getElementById(t).dispatchEvent(new CustomEvent("rpg_resetvalue"))}counterSetDemo(){let t=document.querySelector("#hpTracker");console.log(t),t.maximum="100"}addBonusToStrength(){document.querySelector("#strength").dispatchEvent(new CustomEvent("attributeBonus",{detail:2}))}gimmeGold(){document.querySelector("#wallet").setCurrencyValue("GP",200)}render(){return t("div",null,t("header",null,t("h1",null,"RPG Components Example")),t("main",null,t("div",{class:"intro"},t("div",{class:"intro-container"},t("rpg-text-input",{label:"Name","starting-text":"cthos",placeholder:"name","style-type":"underneath"})),t("div",{class:"intro-container"},t("rpg-text-input",{label:"Class & Level","style-type":"underneath"}),t("rpg-text-input",{label:"Background","style-type":"underneath"}),t("rpg-text-input",{label:"Player Name","style-type":"underneath"}),t("rpg-text-input",{label:"Race","style-type":"underneath"}),t("rpg-text-input",{label:"Alignment","style-type":"underneath"}),t("rpg-text-input",{label:"Experience Points","style-type":"underneath"}))),t("div",{class:"attributes"},t("character-attribute",{id:"strength",name:"Strength","attribute-value":10}),t("character-attribute",{name:"Dexterity","attribute-value":18}),t("character-attribute",{name:"Constitution","attribute-value":8}),t("character-attribute",{name:"Intelligence","attribute-value":12}),t("character-attribute",{name:"Wisdom","attribute-value":10}),t("character-attribute",{name:"Charisma","attribute-value":16})),t("div",{class:"point-example"},t("div",{class:"pointtrack"},t("point-tracker",{id:"manaTracker",title:"MP",maximum:30}),t("point-tracker",{id:"ac",title:"AC",maximum:14,"show-incrementors":!1})),t("div",{class:"hit-point-box"},t("rpg-text-input",{label:"Hit Point Maximum","style-type":"inline"}),t("point-tracker",{id:"hpTracker",maximum:10})),t("div",{class:"skill-list"},t("character-skill",{name:"Acrobatics",proficient:!0}),t("character-skill",{name:"Animal Handling",proficient:!0}),t("character-skill",{name:"Arcana",proficient:!0}),t("character-skill",{name:"Athletics",proficient:!0}),t("character-skill",{name:"Deception",proficient:!0}),t("character-skill",{name:"Knowledge (History)",proficient:!0})),t("div",{class:"wallet"},t("rpg-wallet",{id:"wallet",currencies:["GP","SP","CP"],currencyValues:[100,57,99]})),t("div",{class:"death-saving-throw"},t("death-saving-throw",null))),t("div",{class:"equipment-container"},t("rpg-equipment-box",null)),t("div",{class:"utility-container"},t("button",{type:"button",onClick:()=>this.resetCounter("hpTracker")},"Reset HP Count"),t("button",{type:"button",onClick:()=>this.resetCounter("manaTracker")},"Reset MP Count"),t("button",{type:"button",onClick:()=>this.counterSetDemo()},"Set HP to 100"),t("button",{type:"button",onClick:()=>this.addBonusToStrength()},"+2 to STR"),t("button",{type:"button",onClick:()=>this.gimmeGold()},"Gain Gold"))))}static get is(){return"my-app"}static get style(){return"/**style-placeholder:my-app:**/"}}class a{constructor(){this.minimum=0,this.showIncrementors=!0,this.isEditable=!1}resetCounter(){this.currentValue=this.maximum,this.setValue(this.currentValue)}setValueFromEvent(t){t.detail&&this.setValue(t.detail)}closeEditor(){this.isEditable&&(this.isEditable=!1)}valueChanged(t){this.currentValue!=t.detail&&(this.currentValue=t.detail)}setMaximum(t){this.maximum=parseInt(t),this.setValue(this.maximum)}componentWillLoad(){this.currentValue=this.maximum}setValue(t){let e=new CustomEvent("rpg_setvalue",{detail:t});this.el.querySelector("editable-number").dispatchEvent(e)}decrement(){this.currentValue-=1,this.currentValue<=this.minimum&&(this.currentValue=this.minimum),this.setValue(this.currentValue)}increment(){this.currentValue+=1,this.currentValue>=this.maximum&&(this.currentValue=this.maximum),this.setValue(this.currentValue)}render(){return t("div",{class:"container"},t("h2",null,this.title),t("editable-number",{startingValue:this.currentValue}),this.showIncrementors?t("div",{class:"button-container"},t("button",{class:"button-left",onClick:()=>this.decrement()},"-"),t("button",{class:"button-right",onClick:()=>this.increment()},"+")):"")}static get is(){return"point-tracker"}static get properties(){return{currentValue:{state:!0},el:{elementRef:!0},isEditable:{state:!0},maximum:{type:Number,attr:"maximum",watchCallbacks:["setMaximum"]},minimum:{type:Number,attr:"minimum"},showIncrementors:{type:Boolean,attr:"show-incrementors"},title:{type:String,attr:"title"}}}static get listeners(){return[{name:"rpg_resetvalue",method:"resetCounter"},{name:"rpg_setvalue",method:"setValueFromEvent"},{name:"keyup.escape",method:"closeEditor"},{name:"keyup.enter",method:"closeEditor"},{name:"valueChanged",method:"valueChanged"}]}static get style(){return"/**style-placeholder:point-tracker:**/"}}class n{constructor(){this.currencies=["GP","SP","PP","EP","CP"],this.currencyValues=[0,0,0,0,0]}setCurrencyValue(t,e){let s;(s=Number.isInteger(t)?t:this.currencies.indexOf(t))<0||(this.currentCurrencyValues=this.currentCurrencyValues.map((t,r)=>r===s?e:t))}valueChanged(t){let e=t.target.getAttribute("data-index");this.setCurrencyValue(parseInt(e),t.detail),console.log(this.currentCurrencyValues)}componentWillLoad(){this.currentCurrencyValues=this.currencyValues}render(){return t("div",{class:"wallet-container"},this.currencies.map((e,s)=>t("div",{class:"currency"},t("span",{class:"currency-name"},e),t("span",{class:"currency-value"},t("editable-number",{"data-index":s,"starting-value":this.currentCurrencyValues[s]})))))}static get is(){return"rpg-wallet"}static get properties(){return{currencies:{type:"Any",attr:"currencies"},currencyValues:{type:"Any",attr:"currency-values"},currentCurrencyValues:{state:!0},setCurrencyValue:{method:!0}}}static get listeners(){return[{name:"valueChanged",method:"valueChanged"}]}static get style(){return"/**style-placeholder:rpg-wallet:**/"}}export{e as CharacterAttribute,s as CharacterSkill,r as DeathSavingThrow,i as MyApp,a as PointTracker,n as RpgWallet};