import{h}from"../app.core.js";var EquipmentBox=function(){function t(){this.numGeneric=10,this.numWeapons=3,this.totalWeight=0}return t.prototype.render=function(){for(var t=[],e=[],n=0;n<this.numWeapons;n++)e.push("");for(n=0;n<this.numGeneric;n++)t.push(h("rpg-equipment-generic",null));return h("div",{class:"equipment-box"},e.map(function(t){return t}),t.map(function(t){return t}))},Object.defineProperty(t,"is",{get:function(){return"rpg-equipment-box"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{el:{elementRef:!0},numGeneric:{type:Number,attr:"num-generic"},numWeapons:{type:Number,attr:"num-weapons"},totalWeight:{state:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"/**style-placeholder:rpg-equipment-box:**/"},enumerable:!0,configurable:!0}),t}(),EquipmentGeneric=function(){function t(){this.name="",this.startingCount=0,this.weight=0,this.currentWeight=0}return t.prototype.useItem=function(){return this.currentCount=this.currentCount-1,this.currentCount<0?(this.currentCount=0,!1):(this.eventUsed(),!0)},t.prototype.componentWillLoad=function(){this.currentCount=this.startingCount,this.itemWeight=this.weight},t.prototype.componentDidLoad=function(){var t=this;this.el.querySelector(".weight").addEventListener("rpg_text_changed",function(e){return t.playerChangedWeight(e)}),this.el.querySelector(".quantity").addEventListener("rpg_text_changed",function(e){return t.playerChangedQuantity(e)})},t.prototype.recalculateWeight=function(){this.currentWeight=this.currentCount*this.itemWeight,console.log(this.currentWeight),this.eventWeightChanged()},t.prototype.playerChangedWeight=function(t){this.itemWeight=parseInt(t.detail.newText),this.recalculateWeight()},t.prototype.playerChangedQuantity=function(t){this.currentCount=parseInt(t.detail.newText),this.recalculateWeight()},t.prototype.eventUsed=function(){var t=new CustomEvent("rpg_item_used",{detail:{name:this.name,remainingCount:this.currentCount}});this.el.dispatchEvent(t)},t.prototype.eventWeightChanged=function(){var t=new CustomEvent("rpg_item_weight_changed",{detail:{name:this.name,newWeight:this.currentWeight}});this.el.dispatchEvent(t)},t.prototype.render=function(){return h("div",{class:"equipment-line"},h("rpg-text-input",{"starting-text":this.name}),h("rpg-text-input",{class:"quantity","starting-text":this.currentCount}),h("rpg-text-input",{class:"weight","starting-text":this.currentWeight}),h("span",null,"(",this.currentWeight,")"))},Object.defineProperty(t,"is",{get:function(){return"rpg-equipment-generic"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{currentCount:{state:!0},currentWeight:{state:!0},el:{elementRef:!0},itemWeight:{state:!0},name:{type:String,attr:"name"},size:{type:String,attr:"size"},startingCount:{type:Number,attr:"starting-count"},useItem:{method:!0},weight:{type:Number,attr:"weight"}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"/**style-placeholder:rpg-equipment-generic:**/"},enumerable:!0,configurable:!0}),t}();export{EquipmentBox as RpgEquipmentBox,EquipmentGeneric as RpgEquipmentGeneric};