<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/polymer/lib/elements/dom-if.html">

<dom-module id="editable-number">
  <template>

    <style>
      editable-number {
        display: block;
      }
      
      editable-number .enter-counter-value {
        width: 30px;
        font-size: 18px;
        text-align: center;
        padding: 0;
      }
    </style>
    <template is="dom-if" if="{{isEditable}}">
        <input class="enter-counter-value" on-input="updateValue" value="[[currentValue]]" />
    </template>
    <template is="dom-if" if="{{!isEditable}}">
        <span id="counterValue" class="counter-value">[[currentValue]]</span>
    </template>

  </template>

  <script>
    class EditableNumber extends Polymer.Element {
      static get is() {
        return 'editable-number';
      }

      static get properties() {
        return {
          startingValue: Number,
          isEditable: {
            type: Boolean,
            readonly: true,
            notify: true,
            value: false
          }
        }
      }

      constructor() {
        super();
      }

      ready() {
        super.ready();
        
        this.currentValue = this.startingValue;
        this.isEditable = false;
      }

      updateValue(newVal) {
        this.currentValue = newVal;
        this.isEditable = false;

        this.dispatchEvent(new CustomEvent('valueChanged', {detail: newVal}));
      }
    }

    customElements.define(EditableNumber.is, EditableNumber);
  </script>
</dom-module>